!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,u){function i(e){try{a(r.next(e))}catch(e){u(e)}}function o(e){try{a(r.throw(e))}catch(e){u(e)}}function a(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,o)}a((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,u,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(u){return function(o){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){i.label=u[1];break}if(6===u[0]&&i.label<s[1]){i.label=s[1],s=u;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(u);break}s[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){return function(e,t){var n=this;this.request=function(e,t){return r(n,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.pool.query(e,t)];case 1:return[2,n.sent().rows];case 2:throw n.sent();case 3:return[2]}})})},this.find_all=function(e){return r(n,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:t="SELECT * FROM "+this.table,void 0!==typeof e&&(t+=" ORDER BY "+e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.pool.query(t)];case 2:return[2,n.sent().rows];case 3:throw n.sent();case 4:return[2]}})})},this.find_by_id=function(e){return r(n,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.pool.query("SELECT * FROM "+this.table+" WHERE _id=$1",[e])];case 1:return[2,t.sent().rows];case 2:throw t.sent();case 3:return[2]}})})},this.bulk_insert=function(e){return r(n,void 0,void 0,function(){var t,n,r,u,i,o;return s(this,function(s){switch(s.label){case 0:t=Object.keys(e[0]),n=0,r=e.reduce(function(e,t){var r=Object.values(t).map(function(t){return e.values.push(t),"$"+ ++n});return e.inserts.push("("+r.join(",")+")"),e},{inserts:[],values:[]}),u=r.inserts,i=r.values,o="INSERT INTO "+this.table+" ("+t.join(",")+") VALUES "+u.join(",")+" RETURNING *",s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.pool.query(o,i)];case 2:return[2,s.sent().rows];case 3:throw s.sent();case 4:return[2]}})})},this.single_insert=function(e){return r(n,void 0,void 0,function(){var t,n,r,u,i;return s(this,function(s){switch(s.label){case 0:t=Object.entries(e).reduce(function(e,t,n){var r=t[0],s=t[1];return e.values.push(s),e.props.push(r),e.blings.push("$"+(n+1)),e},{values:[],props:[],blings:[]}),n=t.values,r=t.props,u=t.blings,i="INSERT INTO "+this.table+" ("+r.join(",")+") VALUES ("+u.join(",")+") RETURNING *",s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.pool.query(i,n)];case 2:return[2,s.sent().rows];case 3:throw s.sent();case 4:return[2]}})})},this.single_update=function(e,t){return r(n,void 0,void 0,function(){var n,r,u,i;return s(this,function(s){switch(s.label){case 0:n=Object.entries(e).reduce(function(e,t,n){var r=t[0],s=t[1];return e.values.push(s),e.updates.push(r+" =$"+(n+1)),e},{values:[],updates:[]}),r=n.values,u=n.updates,i="UPDATE "+this.table+" SET ("+u.join(",")+") RETURNING * WHERE _id = "+t,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.pool.query(i,r)];case 2:return[2,s.sent().rows];case 3:throw s.sent();case 4:return[2]}})})},this.destroy_by_id=function(e){return r(n,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.pool.query("DELETE FROM "+this.table+" WHERE _id=$2",[e])];case 1:return[2,t.sent().rows];case 2:throw t.sent();case 3:return[2]}})})},this.pool=e,this.table=t}}();t.Model=u}]);